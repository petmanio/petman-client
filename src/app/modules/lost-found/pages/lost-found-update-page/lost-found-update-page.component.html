<div class="pm-full-loader">
  <div *tdLoading="let item until !(pending$ | appRxDebounce | async); type:'circular'; mode:'indeterminate'; strategy:'overlay'; color:'accent'"
    class="columns is-marginless">
    <div class="column is-8 is-offset-2">
      <td-message [opened]="error$ | async" [label]="'INTERNAL_ERROR_TITLE' | translate" [sublabel]="'INTERNAL_ERROR' | translate"
        color="warn" icon="error"></td-message>
      <form [formGroup]="form">
        <div>
          <mat-hint>{{'PLEASE_FILL_FOR_BETTER_SEARCH' | translate}}</mat-hint>
          <br>
          <mat-form-field class="pm-filter-options">
            <mat-select formControlName='applicationType' [placeholder]="'APPLICATION_TYPE' | translate">
              <mat-option>{{'APPLICATION_TYPE' | translate}}</mat-option>
              <mat-option [value]="item.value" *ngFor="let item of PetType | appKeys">{{ item.value | translate }}</mat-option>
            </mat-select>
            <mat-hint>{{'REQUIRED' | translate}}</mat-hint>
            <mat-error *ngIf="form.get('applicationType').hasError('required')">{{'REQUIRED' | translate}}</mat-error>
          </mat-form-field>

          <mat-form-field class="pm-filter-options">
            <mat-select formControlName='type' [placeholder]="'PET_TYPE' | translate">
              <mat-option>{{'PET_TYPE' | translate}}</mat-option>
              <mat-option [value]="item.value" *ngFor="let item of PetType | appKeys">{{ item.value | translate }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="pm-filter-options">
            <mat-select formControlName='gender' [placeholder]="'GENDER' | translate">
              <mat-option>{{'GENDER' | translate}}</mat-option>
              <mat-option [value]="item.value" *ngFor="let item of Gender | appKeys">{{ item.value | translate }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="pm-filter-options">
            <mat-select formControlName='age' [placeholder]="'AGE' | translate">
              <mat-option>{{'AGE' | translate}}</mat-option>
              <mat-option [value]="item.value" *ngFor="let item of PetAge | appKeys">{{ item.value | translate }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="pm-filter-options">
            <mat-select formControlName='size' [placeholder]="'SIZE' | translate">
              <mat-option>{{'SIZE' | translate}}</mat-option>
              <mat-option [value]="item.value" *ngFor="let item of PetSize | appKeys">{{ item.value | translate }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <br>
        <mat-hint>{{'DESCRIPTION' | translate}}</mat-hint>
        <mat-form-field>
          <textarea class="is-hidden" formControlName='description' matInput></textarea>
          <quill-editor class="pm-quill" [style]="{height: '100px'}" [modules]="quillModules" placeholder="" formControlName='description'></quill-editor>
          <mat-hint>{{'DESCRIPTION_HINT' | translate}}</mat-hint>
          <mat-error *ngIf="form.get('description').hasError('minlength') || form.get('description').hasError('maxlength')">
            {{'DESCRIPTION_ERROR' | translate}}
          </mat-error>
        </mat-form-field>
        <div></div>
        <br>
        <div class="columns">
          <div class="column">
            <div class="pm-image-upload">
              <td-file-upload #fileMultipleUpload formControlName='images' accept="image/jpeg, image/png" defaultColor="accent" activeColor="warn"
                cancelColor="primary" multiple>
                <mat-icon>file_upload</mat-icon>
                <span>
                  {{ fileMultipleUpload.value?.name | appEllipsis:20 }}
                  <span *ngIf="fileMultipleUpload.value?.length" translate [translateParams]="{n: fileMultipleUpload.value.length}">N_FILES_SELECTED</span>
                </span>
                <ng-template td-file-input-label>
                  <mat-icon>attach_file</mat-icon>
                  <span>
                    {{'SELECT_IMAGES' | translate}}
                  </span>
                </ng-template>
              </td-file-upload>
              <mat-hint class="pm-custom" *ngIf="!form.get('images').hasError('maxlength')">{{'IMAGE_HINT' | translate}}</mat-hint>
              <mat-error class="pm-custom" *ngIf="form.get('images').hasError('maxlength')">{{'IMAGE_ERROR' | translate}}</mat-error>
              <!--<div class="pm-image-preview" [hidden]="form.get('images').value">-->
              <!--<div *ngFor="let image of lostFound?.images" [style.background-image]="'url(' + image + ')'">-->
              <!--<fa-icon icon="times-circle"></fa-icon>-->
              <!--</div>-->
              <!--</div>-->
            </div>
          </div>
          <div class="column is-4">
          </div>
        </div>
        <br>
        <div class="columns">
          <div class="column has-text-right">
            <button mat-raised-button color="warn" (click)="delete()">
              {{ 'DELETE' | translate }}
            </button>&nbsp;
            <button mat-raised-button [disabled]="!form.valid" type="submit" color="accent" (click)="update()">
              {{ 'UPDATE' | translate }}
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
